type Did @entity {
  id: ID!
  assetTransactions: [AssetTransaction] @derivedFrom(field: "did")
  advertisementVisitRewards: [AdvertisementReward] @derivedFrom(field: "visitor")
  advertisementForwardRewards: [AdvertisementReward] @derivedFrom(field: "referer")
}

type AssetTransaction @entity {
  id: ID!
  did: Did! @index(unique: false)
  nftId: Nft @index(unique: false)
  timestampInSecond: Int!
  amount: BigInt!
}

type AdvertisementReward @entity {
  id: ID!
  advertisementId: Advertisement! @index(unique: false)
  nftId: Nft!
  visitor: Did! @index(unique: false)
  reward: Int!
  referer: Did!
  award: Int!
  timestampInSecond: Int!
}

type Nft @entity {
  id: ID!
  ownerDid: Did!
}

type NftCurAdvertisement @entity {
  id: ID!
  nft: Nft!
  advertisement: Advertisement!
}

type Advertisement @entity {
  id: ID!
  budgetInAd3: Int!
  advertiser: Did!
  timestampInSecond: Int!
}

type Ad3Transaction @entity {
  id: ID!
  fromDid: Did! @index(unique: false)
  toDid: Did! @index(unique: false)
  amount: Int!
  timestampInSecond: Int!
}